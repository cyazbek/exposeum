<<<<<<< HEAD
using Exposeum.Models;
=======
ï»¿using Exposeum.Models;
using Android.App;
using Android.Content;
>>>>>>> a3cb22d576291c7769d9f594af3a48092b31cf65

namespace Exposeum.Controllers
{
    public static class StoryLineController
    {
<<<<<<< HEAD
        private static StorylineController _storylineController;

        public static StorylineController GetInstance()
        {
            if (_storylineController == null)
                _storylineController = new StorylineController();

            return _storylineController;
        }

        public StoryLine CurrentStoryLine { get; set; }

		//here we need a method to supply to the view a list of storyline so that it can generate the visual list.
		//public sometype getStorylines(){}

        public void CreateTempStoryline ()
		{
			//currently, the dummy seed data for the current storyline is in Map.cs seedData() method.
        }

        public void ResetStorylineProgress(StoryLine storyLine)
        {
            foreach (var poi in storyLine.poiList)
            {
                poi.Visited = false;
            }

            storyLine.SetLastPointOfInterestVisited(null);
            storyLine.currentStatus = Status.isNew;

        }

        public void PauseStorylineBeacons()
        {
            BeaconFinder.getInstance().stopRanging();
        }

        public void ResumeStorylineBeacons()
        {
            BeaconFinder.getInstance().findBeacons();
        }
=======

		private static Map map = MapService.GetMapInstance();
		private static StoryLine selectedStoryLine;

		public static StoryLineListAdapter GetStoryLines(Activity activity){
			return new StoryLineListAdapter(activity, map.getStoryLineList);
		}

		public static void SelectStoryLine(int storylinePosition){
			selectedStoryLine = map.getStoryLineList[storylinePosition];
		}

		public static void ShowSelectedStoryLineDialog(FragmentTransaction transaction, Context context){
			
				
				DialogFragment dialog;
				if(selectedStoryLine.currentStatus==Status.inProgress)
				{
					dialog = new DialogStorylineInProgress(selectedStoryLine, context);
				}
				else
				{
					dialog = new DialogStoryline(selectedStoryLine, context);
				}

				dialog.Show(transaction, "Story Line title");
		}

		public static void SetActiveStoryLine(){
			map.CurrentStoryline = selectedStoryLine;
		}
>>>>>>> a3cb22d576291c7769d9f594af3a48092b31cf65
    }
}